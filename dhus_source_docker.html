<!DOCTYPE HTML>   
<html>
	<head>
		<link rel="stylesheet" href="assets/css/skel.css" />
			<link rel="stylesheet" href="assets/css/style.css" />
			<link rel="stylesheet" href="assets/css/style-wide.css" />
		<title>Open Source Portal</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
 		<script src="assets/js/jquery.min.js"></script>
		<script src="assets/js/jquery.dropotron.min.js"></script>
		<script src="assets/js/skel.min.js"></script>
		<script src="assets/js/skel-layers.min.js"></script>
		<script src="assets/js/init.js"></script>
	
	</head>
	<body>

		<!-- Header -->
			<div id="header">
				<h1><a href="index.html" id="logo">Open Source DHuS Portal</a></h1>		
     <!--<h1>
     <a href="index.html" class="image left"><img src="assets/images/oslogomini.jpg" "alt="" /></a>
     <a href="http://ec.europa.eu/index_en.html" class="image left"><img src="assets/images/ec-mini.jpg" "alt=""/></a>
     <a href="index.html" id="logo"> <em>Open Source Portal</em></a>
     <a href="http://www.copernicus.eu/" class="image left"><img src="assets/images/copernicus-mini.jpg" "alt=""/></a>
     <a href="http://www.esa.int/ESA" class="image left"><img src="/assets/images/esa-mini.jpg" "alt=""/></a>    
     </h1>-->
				
		<nav id="nav">
						<ul>
						<li ><a href="index.html">Home</a></li>
						<li ><a href="about.html">About</a></li>

							<li ><a href="https://github.com/SentinelDataHub/DataHubSystem">Download</a></li>	
							<li ><a href="support.html">Support</a></li>
							
							<li>
               	<a href="">Documentation</a>
								<ul>
									<li><a href="governance.html"> Governance Model</a></li>
									<li><a href="guidelines.html">Developer Guidelines</a></li>
                 <!-- <li><a href="#">Interface Control Document</a></li>-->
      		       </ul>
							</li>
					
							
					<li> <a href=""> Pilot Projects</a>
							<ul>
								<li><a href="dhus_docker_installation.html"> Docker Technologies Integration</a></li>
								<li><a href="multi-mission-access.html">Multi-Mission Access</a></li>
								<li><a href="wms.html">WMS-Integration</a></li>
					</ul>
				</li>
							<li ><a href="">External Resources</a>
							         <ul>
								<li><a target="_blank" href="http://step.esa.int/main/toolboxes/snap/"> SNAP</a></li>
								<li><a target="_blank" href="http://step.esa.int/main/toolboxes/sentinel-1-toolbox/">S-1 Toolbox </a></li>
								<li><a target="_blank" href="http://step.esa.int/main/toolboxes/sentinel-2-toolbox/">S-2 Toolbox</a></li>
								<li><a target="_blank" href="http://step.esa.int/main/toolboxes/sentinel-3-toolbox/">S-3 Toolbox</a></li>
								</ul>
							</li>
				<li ><a href="contact.html">Contact Us</a></li>
					
						</ul>
					</nav>

			</div>
				
<!-- Main -->
<section id="banner">
</section>
	<section class="wrapper style1">
		<div class="container">
			<div id="content">
				<!-- Content -->
					<article>
						
						<header>
							<h2>Docker Technologies Integration</h2>
											</header>
<p align="JUSTIFY">
	</p>
<h2> Installation of DHuS from source distribution using Docker</h2>
<p align="JUSTIFY"> Short guide for downloading the DHuS source distribution, compiling the application, install and execute it, using the Docker and Docker-compose S/W.</p>

				<h2>1.Prerequisites</h2>
<p align="JUSTIFY">
The following are the prerequisites for the Unix system where the DHuS will be installed:
<p align="JUSTIFY">&bull; Connection to Internet;
<p align="JUSTIFY">&bull; Docker and docker-compose S/W already installed. Please refer to the official Docker documentation at <a target="_blank" href=" https://docs.docker.com/"> https://docs.docker.com/</a> for the Docker and Docker-Compose installation requisites and installation instructions for the different Operating Systems.</p>
<p align="JUSTIFY">&bull;Creation of user and group “dhus” with UID 10125 and GID 10125. If a user/group dhus is already existing on the host with different UID/GID, another name can be used. The user must be also added to the group docker (created as part of the docker s/w installation).</p>
				<h2>2.	Installation and execution</h2>
<p align="JUSTIFY">
 Using the dhus account (or the other name assigned to UID 10125):</p>

<p align="justify"><strong> STEP1:</strong>In a directory of your choice, create the working directory for the application Docker_Dhus:
<code>
<p><span style="color: #0000ff;">mkdir Docker_Dhus</span></p>
	<p><span style="color: #0000ff;">cd Docker_Dhus</span></p>
</code>			
<p align="JUSTIFY">
	The rest of commands below must be run from inside the Docker_Dhus directory:</p>
<p align="justify"><strong> STEP 2:</strong>In the directory Docker_Dhus, extract the content of the file <a href="https://github.com/testkalos/DataHubSystem/raw/gh-pages/Docker_Dhus_files_for_source_code.tar">Docker_Dhus_files_for_source_code.tar </a>:</p>
<code>
	<p><span style="color: #0000ff;">tar xvf Docker_Dhus_files_for_source_code.tar</span></p>
<p align="justify"><strong> STEP 3:</strong>Download the Docker Dhus build environment from the Docker Hub and build the local image:</p> 
	<code><p> <span style="color: #0000ff;">docker-compose build</span> </p></code>
<p align="justify"><strong> STEP 4:</strong>Clone the DHuS source distribution from the github:</p>
	<code><p> <span style="color: #0000ff;">docker-compose run dhus clone</span></p></code>
<p align="justify"><strong> STEP 5:</strong>From the cloned DHuS source distribution build the application:</p>
	<code><p><span style="color: #0000ff;">docker-compose run dhus build</span></p></code>
<p align="justify"><strong> STEP 6:</strong>Install the builded DHuS:</p>
<code><p><span style="color: #0000ff;">docker-compose run dhus install</span></p></code>
<p align="justify"><strong> STEP 7:</strong>Start the installed DHuS:</p>
	<code><p><span style="color: #0000ff;"> docker-compose run --service-ports dhus execute & </span></p></code>
<p align="justify">				
	The server will be accessible at: http://localhost:8081</p>
<p align="justify"> Note: In case the local port 8081 is being used by another application on the host, modify the docker-compose.yml file distributed with the tar:
				</p>
<p align="justify">				
	From: “8081:8081”</p>
<p align="justify">To: “&lt;your chosen port>: 8081”
</p>
				<p align="justify">Start the DHuS again.</p>

				<h2>3.	DHuS stop</h2>

<p align="justify"> To stop the DHuS properly, execute the stop.sh script internally to the container:</p>

				<p align="justify"><strong> STEP 1:</strong> Verify the name of the running docker container executing the DHuS:</p>
	<code><p><span style="color: #0000ff;"> docker ps -a</span></p></code>
				<p align="justify"><strong> STEP 2:</strong>  Stop the DHuS: </p>
	<code><p><span style="color: #0000ff;"> docker exec &LT;container name> /usr/shared/DHUS/stop.sh</span></p>	</code>

Example: 
<p><span style="color: #0000ff;">	$ docker ps -a:</span></p>
<table style="height: 74px;" width="463">
<tbody>
<tr>
<td><strong>CONTAINER ID</strong></td>
<td><strong>IMAGE</strong></td>
<td><strong>COMMAND</strong></td>
<td><strong>CREATED</strong></td>
<td><strong>STATUS</strong></td>
<td><strong>PORTS</strong></td>
<td><strong>NAMES</strong></td>
</tr>
<tr>
<td><span style="color: #ff0000;">&nbsp;89060bd12a31&nbsp;</span></td>
<td><span style="color: #ff0000;">&nbsp;dockerdhus_dhus&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</span></td>
<td><span style="color: #ff0000;">&nbsp;"make execute" &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td>
<td><span style="color: #ff0000;">&nbsp;3 minutes ago&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td>
<td><span style="color: #ff0000;">&nbsp;Up 3 minutes&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></td>
<td><span style="color: #ff0000;">&nbsp;0.0.0.0:8081-&gt;8081/tcp&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;</span></td>
<td><span style="color: #ff0000;">dockerdhus_dhus_run_6&nbsp;</span></td>
</tr>
<tr>
<td>&nbsp;127d7b2b81f3 &nbsp;</td>
<td>dockerdhus_dhus&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</td>
<td>&nbsp; &nbsp;&nbsp;"make execute" &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>7 minutes ago&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</td>
<td>Exited (0) 5 minutes ago&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>&nbsp;</td>
<td>dockerdhus_dhus_run_5</td>
</tr>
<tr>
<td>3325e95b078f</td>
<td>dockerdhus_dhus&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</td>
<td>&nbsp; &nbsp;"make execute" &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>41 minutes ago&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;</td>
<td>&nbsp;Exited (0) 7 minutes ago&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>
<td>&nbsp;</td>
<td>dockerdhus_dhus_run_4</td>
</tr>
</tbody>
</table>	
<code><p><span style="color: #0000ff;"> $ docker exec dockerdhus_dhus_run_6 /usr/shared/DHUS/stop.sh</span> </p>	</code>
						
						
						
						
						
						
						
						
	</article>
		</div>
		</div>
	</section>
